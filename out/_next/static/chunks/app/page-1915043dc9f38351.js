(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1402:(e,t,a)=>{"use strict";a.d(t,{QO:()=>u,jk:()=>c,re:()=>d});var s=a(7167);let l="kepler_keps_v2",r="kepler_tree_v2";function n(e,t){try{let a=localStorage.getItem(e);if(!a)return null;let s=JSON.parse(a);if(Date.now()-s.timestamp<t)return s.data}catch(e){}return null}function i(e,t){try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now()}))}catch(e){}}function c(e){let t=e.match(/^keps\/(sig-[^/]+)\/(\d+)-([^/]+)\/kep\.yaml$/);return t?{sig:t[1],number:t[2],slug:t[3]}:null}async function o(){let e=n(r,36e5);if(e)return e;let t=await fetch("".concat("https://api.github.com","/repos/kubernetes/enhancements/git/trees/HEAD?recursive=1"));if(!t.ok)throw Error("GitHub API error: ".concat(t.status," ").concat(t.statusText));let a=(await t.json()).tree.filter(e=>"blob"===e.type&&/^keps\/sig-[^/]+\/\d+-[^/]+\/kep\.yaml$/.test(e.path)).map(e=>e.path);return i(r,a),a}async function u(e){let t=await fetch("".concat("https://raw.githubusercontent.com/kubernetes/enhancements/master","/").concat(e));if(!t.ok)throw Error("Failed to fetch ".concat(e,": ").concat(t.status));let a=await t.text(),l=s.Ay.load(a)||{},r=c(e),n=e.replace("/kep.yaml","");return{...l,path:e,...r,title:l.title||"KEP-".concat(r.number),githubUrl:"https://github.com/kubernetes/enhancements/tree/master/".concat(n)}}async function d(e){let t=n(l,216e5);if(t)return null==e||e(t.length,t.length),t;let a=(await o()).filter(e=>null!==c(e)),s=a.length,r=[];for(let t=0;t<a.length;t+=15){let l=a.slice(t,t+15);for(let e of(await Promise.allSettled(l.map(e=>u(e)))))"fulfilled"===e.status&&r.push(e.value);null==e||e(Math.min(t+15,s),s)}return r.sort((e,t)=>Number(t.number)-Number(e.number)),i(l,r),r}},3695:(e,t,a)=>{"use strict";a.d(t,{KepListPage:()=>m});var s=a(5155),l=a(2115),r=a(1402),n=a(2619),i=a.n(n),c=a(4013);function o(e){let{kep:t}=e,a=t.sig.replace(/^sig-/,"SIG ").replace(/-/g," "),l=t.slug.replace(/-/g," ");return(0,s.jsxs)(i(),{href:"/kep?number=".concat(t.number),className:"kep-card",children:[(0,s.jsxs)("div",{className:"kep-card-number",children:["KEP-",t.number]}),(0,s.jsx)("h3",{className:"kep-card-title",children:t.title||l}),(0,s.jsx)("div",{className:"kep-card-sig",children:a}),(0,s.jsxs)("div",{className:"kep-card-badges",children:[(0,s.jsx)(c.W,{status:t.status}),(0,s.jsx)(c.m,{stage:t.stage})]}),t["creation-date"]&&(0,s.jsx)("div",{className:"kep-card-date",children:new Date(t["creation-date"]).getFullYear()})]})}function u(e){let{loaded:t,total:a}=e,l=a>0?Math.round(t/a*100):0;return(0,s.jsxs)("div",{className:"loading-container",children:[(0,s.jsx)("div",{className:"loading-bar-track",children:(0,s.jsx)("div",{className:"loading-bar-fill",style:{width:"".concat(l,"%")}})}),(0,s.jsxs)("div",{className:"loading-text",children:["Loading KEPs… ",t,"/",a," (",l,"%)"]})]})}let d=["provisional","implementable","implemented","deferred","rejected","withdrawn","replaced"],h=["pre-alpha","alpha","beta","stable"];function p(e){let{filters:t,sigs:a,onChange:l}=e;function r(e){l({...t,...e})}return(0,s.jsxs)("div",{className:"search-filter-bar",children:[(0,s.jsx)("input",{type:"search",className:"search-input",placeholder:"Search by title, KEP number, or author…",value:t.query,onChange:e=>r({query:e.target.value}),"aria-label":"Search KEPs"}),(0,s.jsxs)("div",{className:"filter-selects",children:[(0,s.jsxs)("select",{className:"filter-select",value:t.sig,onChange:e=>r({sig:e.target.value}),"aria-label":"Filter by SIG",children:[(0,s.jsx)("option",{value:"",children:"All SIGs"}),a.map(e=>(0,s.jsx)("option",{value:e,children:e.replace(/^sig-/,"SIG ").replace(/-/g," ")},e))]}),(0,s.jsxs)("select",{className:"filter-select",value:t.status,onChange:e=>r({status:e.target.value}),"aria-label":"Filter by status",children:[(0,s.jsx)("option",{value:"",children:"All statuses"}),d.map(e=>(0,s.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,s.jsxs)("select",{className:"filter-select",value:t.stage,onChange:e=>r({stage:e.target.value}),"aria-label":"Filter by stage",children:[(0,s.jsx)("option",{value:"",children:"All stages"}),h.map(e=>(0,s.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(t.query||t.sig||t.status||t.stage)&&(0,s.jsx)("button",{className:"clear-btn",onClick:()=>l({query:"",sig:"",status:"",stage:""}),children:"Clear"})]})]})}function m(){let{keps:e,loading:t,progress:a,error:n,reload:i}=function(){let[e,t]=(0,l.useState)([]),[a,s]=(0,l.useState)(!0),[n,i]=(0,l.useState)({loaded:0,total:0}),[c,o]=(0,l.useState)(null),[u,d]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=!1;return async function(){s(!0),o(null),t([]),i({loaded:0,total:0});try{let a=await (0,r.re)((t,a)=>{e||i({loaded:t,total:a})});e||(t(a),i({loaded:a.length,total:a.length}),s(!1))}catch(t){e||(o(t instanceof Error?t.message:"Failed to load KEPs"),s(!1))}}(),()=>{e=!0}},[u]),{keps:e,loading:a,progress:n,error:c,reload:(0,l.useCallback)(()=>{localStorage.removeItem("kepler_keps_v2"),localStorage.removeItem("kepler_tree_v2"),d(e=>e+1)},[])}}(),[c,d]=(0,l.useState)({query:"",sig:"",status:"",stage:""}),[h,m]=(0,l.useState)(1),g=(0,l.useMemo)(()=>[...new Set(e.map(e=>e.sig))].sort(),[e]),b=(0,l.useMemo)(()=>{let t=c.query.toLowerCase();return e.filter(e=>{var a,s;return(!t||!!(null==(a=e.title)?void 0:a.toLowerCase().includes(t))||!!e.number.includes(t)||!!(null==(s=e.authors)?void 0:s.some(e=>e.toLowerCase().includes(t)))||!!e.slug.includes(t))&&(!c.sig||e.sig===c.sig)&&(!c.status||e.status===c.status)&&(!c.stage||e.stage===c.stage)&&!0})},[e,c]),f=Math.max(1,Math.ceil(b.length/48)),x=Math.min(h,f),v=b.slice((x-1)*48,48*x);return(0,s.jsxs)("div",{className:"list-page",children:[(0,s.jsx)(p,{filters:c,sigs:g,onChange:function(e){d(e),m(1)}}),t&&(0,s.jsx)(u,{loaded:a.loaded,total:a.total}),n&&(0,s.jsxs)("div",{className:"error-box",children:[(0,s.jsx)("strong",{children:"Error loading KEPs:"})," ",n,(0,s.jsx)("button",{className:"retry-btn",onClick:i,children:"Retry"})]}),!t&&!n&&(0,s.jsxs)("div",{className:"results-header",children:[b.length," KEP",1!==b.length?"s":"",(c.query||c.sig||c.status||c.stage)&&" matching filters"]}),(0,s.jsx)("div",{className:"kep-grid",children:v.map(e=>(0,s.jsx)(o,{kep:e},e.path))}),f>1&&(0,s.jsxs)("div",{className:"pagination",children:[(0,s.jsx)("button",{className:"page-btn",onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===x,children:"← Previous"}),(0,s.jsxs)("span",{className:"page-info",children:["Page ",x," of ",f]}),(0,s.jsx)("button",{className:"page-btn",onClick:()=>m(e=>Math.min(f,e+1)),disabled:x===f,children:"Next →"})]})]})}},4013:(e,t,a)=>{"use strict";a.d(t,{W:()=>i,m:()=>c});var s=a(5155);let l={provisional:"#f59e0b",implementable:"#3b82f6",implemented:"#10b981",deferred:"#6b7280",rejected:"#ef4444",withdrawn:"#9ca3af",replaced:"#8b5cf6"},r={"pre-alpha":"#9ca3af",alpha:"#f59e0b",beta:"#3b82f6",stable:"#10b981"};function n(e){let{text:t,color:a}=e;return(0,s.jsx)("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:"12px",fontSize:"0.72rem",fontWeight:600,textTransform:"capitalize",backgroundColor:a+"22",color:a,border:"1px solid ".concat(a,"44"),letterSpacing:"0.02em"},children:t})}function i(e){var t;let{status:a}=e;return a?(0,s.jsx)(n,{text:a,color:null!=(t=l[a])?t:"#6b7280"}):null}function c(e){var t;let{stage:a}=e;return a?(0,s.jsx)(n,{text:a,color:null!=(t=r[a])?t:"#6b7280"}):null}},8936:(e,t,a)=>{Promise.resolve().then(a.bind(a,3695))}},e=>{e.O(0,[619,167,441,255,358],()=>e(e.s=8936)),_N_E=e.O()}]);